name: rfq_protocol
author: eightballer
version: 1.0.0
description: A protocol for managing the request for quote (RFQ) flow within a multi-agent trading system.
license: Apache-2.0
aea_version: '>=1.0.0, <2.0.0'
protocol_specification_id: eightballer/rfq_protocol:1.0.0
speech_acts:

  request_quote:
    market_id: pt:str
    volume: pt:float
    side: ct:OrderSide
    chain_id: pt:optional[pt:int] # Specify if only a specific blockchain is to be used

  quote_response:
    quote_id: pt:str
    market_id: pt:str
    price: pt:float
    volume: pt:float
    expiry: pt:int # Quote expiry time in Unix timestamp
    chain_id: pt:optional[pt:int]
    side: ct:OrderSide

  accept_quote:
    quote_id: pt:str
    confirmation_data: pt:bytes

  trade_confirmation:
    trade_id: pt:str
    quote_id: pt:str
    market_id: pt:str
    price: pt:float
    volume: pt:float
    chain_id: pt:optional[pt:int]
    side: ct:OrderSide

  reject_quote:
    quote_id: pt:str
    reason: pt:str
  error:
    error_code: ct:ErrorCode
    error_msg: pt:str

ct:ErrorCode: |
  enum ErrorCodeEnum {
    INVALID_REQUEST = 0;
    QUOTE_EXPIRED = 1;
    TRADE_FAILED = 2;
    UNSUPPORTED_MARKET = 3;
    UNSUPPORTED_CHAIN = 4;
  }
  ErrorCodeEnum error_code = 1;

initiation: [request_quote]
reply:
  request_quote: [quote_response, error]
  quote_response: [execute_trade, error]
  accept_quote: [trade_confirmation, error]
  trade_confirmation: []
  reject_quote: []
  error: [ ]
termination: [trade_confirmation, reject_quote, error]
roles: {requestor, responder}
end_states: [ trade_confirmation, error, reject_quote ]
keep_terminal_state_dialogues: false